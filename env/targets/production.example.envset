# Copy to production.envset, fill in production credentials, then run:
#   node scripts/apply-env.mjs production
# The script will generate backend/.env.production, frontend/.env.production,
# and env/out/production-apprunner.env for easy copy/paste into AWS.
#
# Notes:
# - Replace the placeholder App Runner and Amplify domains with the ones shown in the AWS console.
# - Keep PAYLOAD_PUBLIC_SERVER_URL aligned with the App Runner default domain used in Amplify rewrites.

[common]
PORT=3000

[backend]
DATABASE_URI="mongodb+srv://user:pass@cluster.mongodb.net/moafinder?retryWrites=true&w=majority"
PAYLOAD_SECRET="replace-with-production-secret"
PAYLOAD_PUBLIC_SERVER_URL=https://your-app.apprunner.aws
CORS_ORIGINS=https://main.your-amplify-domain.com,https://www.moabit.world,https://moabit.world

# Outgoing email (Gmail SMTP). Use a Google Workspace account with 2â€‘Step Verification
# and an App Password. For Gmail: host=smtp.gmail.com, port=587 (STARTTLS).
# Set SMTP_ENABLE=true so Payload uses real SMTP (not JSON transport).
SMTP_ENABLE=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@your-domain.com
SMTP_PASS=your-16-char-gmail-app-password

# From identity (both are supported in code paths; set both for clarity)
EMAIL_FROM=your-email@your-domain.com
EMAIL_FROM_NAME="MoaFinder"
SMTP_FROM_EMAIL=your-email@your-domain.com
SMTP_FROM_NAME="MoaFinder"

# App-specific recipients
CONTACT_RECIPIENT_EMAILS=info@your-domain.com
EVENT_APPROVAL_NOTIFICATION_EMAILS=team@your-domain.com

# S3 Storage for Media Files (REQUIRED for persistent storage in AWS App Runner)
# Create an S3 bucket in eu-central-1 (or your preferred region) and an IAM user
# with s3:GetObject, s3:PutObject, s3:DeleteObject permissions on the bucket.
# The bucket should have public access enabled for serving media files.
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY_ID=your-access-key-id
S3_SECRET_ACCESS_KEY=your-secret-access-key
S3_REGION=eu-central-1

[frontend]
VITE_API_BASE_URL=https://your-app.apprunner.aws/api

[apprunner]
PAYLOAD_PUBLIC_SERVER_URL=https://your-app.apprunner.aws
CORS_ORIGINS=https://main.your-amplify-domain.com,https://www.moabit.world,https://moabit.world
HOSTNAME=0.0.0.0
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY_ID=your-access-key-id
S3_SECRET_ACCESS_KEY=your-secret-access-key
S3_REGION=eu-central-1
